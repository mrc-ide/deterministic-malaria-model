<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Alternative model runs • ICDMM</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Alternative model runs">
<meta property="og:description" content="ICDMM">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ICDMM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index">
    <span class="fas fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/run_model_example.html">Simplest Model Run</a>
    </li>
    <li>
      <a href="../articles/run_model.html">More Flexible Model Run</a>
    </li>
    <li>
      <a href="../articles/run_model_alternative.html">Alternative Model Runs</a>
    </li>
    <li>
      <a href="../articles/write_own_model.html">Writing Your Own Model</a>
    </li>
    <li class="divider">
    <li>
      <a href="../CONTRIBUTING.html">Contributing</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mrc-ide/deterministic-malaria-model">
    <span class="fas fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="run_model_alternative_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Alternative model runs</h1>
                        <h4 class="author">Joel Hellewell</h4>
            
            <h4 class="date">2021-02-23</h4>
      
      
      <div class="hidden name"><code>run_model_alternative.Rmd</code></div>

    </div>

    
    
<div id="emanator-model" class="section level2">
<h2 class="hasAnchor">
<a href="#emanator-model" class="anchor"></a>Emanator model</h2>
<p>To run the version of the malaria model that has emanators in instead of IRS (see <a href="http://dx.doi.org/10.1098/rstb.2019.0817">emanator modelling paper</a>), several further parameter values need to be specified when calling <code>run_model</code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">ICDMM</span><span class="op">)</span>

<span class="co"># Some toy parameter values to run the emanator model</span>
<span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_model.html">run_model</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">"odin_model_emanators"</span>,
                 time <span class="op">=</span> <span class="fl">1000</span>,
                 init_EIR <span class="op">=</span> <span class="fl">5</span>,
                 r_EM0 <span class="op">=</span> <span class="fl">0.6053263</span>, <span class="co"># Probability of emanator repelling mosquito</span>
                 em_loss <span class="op">=</span> <span class="fl">0.001954954</span>, <span class="co"># Exponential decay of emanator effectiveness</span>
                 d_EM0 <span class="op">=</span> <span class="fl">0</span>, <span class="co"># Probability of emanator killing mosquito</span>
                 Q0 <span class="op">=</span> <span class="fl">0.92</span>, <span class="co"># Mosquito anthropophagy (% of bites on humans)</span>
                 bites_Emanator <span class="op">=</span> <span class="fl">0.4</span>, <span class="co"># % of bites while using emanator</span>
                 bites_Indoors <span class="op">=</span> <span class="fl">0.6</span>, <span class="co"># % of bites indoors</span>
                 bites_Bed <span class="op">=</span> <span class="fl">0.55</span>, <span class="co">#  % of bites in bed</span>
                 surv_bioassay <span class="op">=</span> <span class="fl">0</span>, <span class="co"># % of mosquitoes surviving insecticide bioassay</span>
                 EM_interval <span class="op">=</span> <span class="fl">365</span>, <span class="co"># How often emanators are refreshed</span>
                 EM_on <span class="op">=</span> <span class="fl">365</span>, <span class="co"># When emanators are first distributioed</span>
                 ITN_on <span class="op">=</span> <span class="fl">365</span>, <span class="co"># When ITNs are first distributed</span>
                 ITN_interval <span class="op">=</span> <span class="fl">365</span><span class="op">*</span><span class="fl">3</span>, <span class="co"># How often ITNs are refreshed</span>
                 em_cov <span class="op">=</span> <span class="fl">0.9</span>, <span class="co"># Emanator population coverage</span>
                 irs_cov <span class="op">=</span> <span class="fl">0.9</span>, <span class="co"># This needs to be fixed at some point</span>
                 itn_cov <span class="op">=</span> <span class="fl">0</span>, <span class="co"># ITN population coverage</span>
                 num_int <span class="op">=</span> <span class="fl">4</span>,
                 country <span class="op">=</span> <span class="cn">NULL</span>,
                 admin2 <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">out</span><span class="op">$</span><span class="va">t</span>,<span class="va">out</span><span class="op">$</span><span class="va">prev</span>, main<span class="op">=</span> <span class="st">"Prevalance"</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.3</span><span class="op">)</span>, type<span class="op">=</span><span class="st">'l'</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span><span class="op">(</span>v <span class="op">=</span> <span class="fl">365</span>, lty <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span><span class="op">(</span>h <span class="op">=</span> <span class="fl">0.1522</span>, lty <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></code></pre></div>
<p><img src="run_model_alternative_files/figure-html/unnamed-chunk-1-1.png" width="700"></p>
</div>
<div id="ivermectin-smc-model" class="section level2">
<h2 class="hasAnchor">
<a href="#ivermectin-smc-model" class="anchor"></a>Ivermectin SMC model</h2>
<p>In this version of the model, ivermectin is deployed as an endectocide</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co">#Demo of this model to go here</span></code></pre></div>
</div>
<div id="transmission-blocking-vaccine-model" class="section level2">
<h2 class="hasAnchor">
<a href="#transmission-blocking-vaccine-model" class="anchor"></a>Transmission blocking vaccine model</h2>
<p>In this version of the model, a transmission-blocking vaccine (TBV) can be introduced (as described in Challenger et al. forthcoming publication). Note that IRS cannot be introduced in this version of the model. The TBV can be introduced on its own, or delivered alongside a pre-ethrocytic vaccine (based on the RTS,S vaccine). Parameterisation of the latter vaccine was taken from <a href="https://doi.org/10.1016/S1473-3099(15)00239-X">White et al.</a> and <a href="https://doi.org/10.1186/s12916-018-1095-6">Hogan et al.</a></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#Several vaccine-specific parameters are stored here, with their definitions</span>
<span class="co">#source("scripts/vaccine_params.R")</span>
<span class="co">#Here they are, with their definitions</span>
<span class="va">CS_peak</span> <span class="op">&lt;-</span><span class="fl">621</span> <span class="co">#Peak antibody titre (after primary vaccination with RTS,S)</span>
<span class="va">CS_boost</span> <span class="op">&lt;-</span> <span class="fl">277</span> <span class="co"># Peak antibody titre (after booster dose of RTS,S)</span>
<span class="va">p_peak</span> <span class="op">&lt;-</span> <span class="fl">0.88</span> <span class="co">#Proportion of antibody response that is short lived (after primary vaccination with RTS,S)</span>
<span class="va">p_boost</span><span class="op">&lt;-</span><span class="fl">0.7</span> <span class="co">#Proportion of antibody response that is short lived (after booster dose of RTS,S)</span>
<span class="va">ds</span> <span class="op">&lt;-</span> <span class="fl">45</span> <span class="co">#decay rate of short-lived anitbody response to RTS,S</span>
<span class="va">dl</span> <span class="op">&lt;-</span> <span class="fl">591</span> <span class="co">#decay rate of long-lived anitbody response to RTS,S</span>
<span class="va">beta_RTS</span> <span class="op">&lt;-</span> <span class="fl">99.2</span> <span class="co">#Shape param for dose-response of RTS,S</span>
<span class="va">alpha_RTS</span>  <span class="op">&lt;-</span> <span class="fl">0.74</span> <span class="co">#Shape param for dose-response of RTS,S</span>
<span class="va">V_max_RTS</span> <span class="op">&lt;-</span> <span class="fl">0.93</span> <span class="co"># Max RTS,S efficacy</span>

<span class="co">#Scheduling parameters</span>
<span class="va">t_boost_rts</span> <span class="op">&lt;-</span> <span class="fl">365</span>

<span class="co">#Extra params for the TBV vaccine (For Pfs230 estimate)</span>
<span class="co">#v_max_effic &lt;- 0.96</span>
<span class="co">#v_alpha &lt;- 2.13</span>
<span class="co">#v_beta &lt;- 349.58</span>
<span class="co">#v_decay &lt;- 0.022</span>
<span class="co">#v_interval &lt;- 365</span>

<span class="co">#Extra params for the TBV vaccine (For Pfs25 estimate)</span>
<span class="va">hill1</span> <span class="op">&lt;-</span> <span class="fl">2.50</span> <span class="co">#Hill parameter for dose-response curve</span>
<span class="va">hill2</span> <span class="op">&lt;-</span> <span class="fl">0.06</span> <span class="co">#Hill parameter for dose-response curve</span>
<span class="va">mu25</span> <span class="op">&lt;-</span> <span class="fl">12.63</span> <span class="co">#Titre (\mu g/ml) to centre the dose-response curve</span>
<span class="va">tau25</span> <span class="op">&lt;-</span> <span class="fl">22</span> <span class="co">#Max. antibody titre</span>
<span class="va">rho25</span> <span class="op">&lt;-</span> <span class="fl">0.7</span> <span class="co">#Proportion of antibody response associated with quicker decay</span>
<span class="va">ds25</span> <span class="op">&lt;-</span> <span class="fl">45</span> <span class="co">#Short antibody half-life</span>
<span class="va">dl25</span> <span class="op">&lt;-</span> <span class="fl">590</span> <span class="co">#Long antibody half-life</span>
<span class="va">ds25worse</span> <span class="op">&lt;-</span> <span class="fl">0.5</span><span class="op">*</span><span class="va">ds25</span><span class="co">#35 #Short antibody half-life</span>
<span class="va">dl25worse</span> <span class="op">&lt;-</span> <span class="fl">0.5</span><span class="op">*</span><span class="va">dl25</span> <span class="co">#450 #Long antibody half-life</span>
<span class="va">ds25better</span> <span class="op">&lt;-</span> <span class="fl">2</span><span class="op">*</span><span class="va">ds25</span><span class="co">#55 #Short antibody half-life</span>
<span class="va">dl25better</span> <span class="op">&lt;-</span> <span class="fl">2</span><span class="op">*</span><span class="va">dl25</span> <span class="co">#730 #Long antibody half-life</span>
<span class="va">v_interval</span> <span class="op">&lt;-</span> <span class="fl">365</span> <span class="co">#Interval between TBV vaccinations</span>


<span class="co">#Parameters to define</span>
<span class="va">ITN_IRS_on</span> <span class="op">&lt;-</span> <span class="fl">4</span> <span class="op">*</span> <span class="fl">365</span> <span class="op">+</span> <span class="fl">100</span> <span class="co"># When ITNs are introduced</span>

<span class="va">init_age</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span>,<span class="fl">1</span>,<span class="fl">1.25</span>,<span class="fl">1.5</span>,<span class="fl">1.75</span>,<span class="fl">2</span>,<span class="fl">3.5</span>,<span class="fl">5</span>,<span class="fl">7.5</span>,<span class="fl">10</span>,<span class="fl">15</span>,<span class="fl">20</span>,<span class="fl">30</span>,<span class="fl">40</span>,<span class="fl">50</span>,<span class="fl">60</span>,<span class="fl">70</span>,<span class="fl">80</span><span class="op">)</span>

<span class="co">#Min &amp; Max age for vaccination. Values refer to the position in age vector, NOT age in years</span>
<span class="co">#RTS,S</span>
<span class="va">age_min_rts</span> <span class="op">&lt;-</span> <span class="fl">3</span>
<span class="va">age_max_rts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">init_age</span> <span class="op">&gt;</span> <span class="fl">5</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="fl">1</span> <span class="co"># index of age vector before age is 5 years</span>
<span class="co">#TBV</span>
<span class="va">age_min_tbv</span> <span class="op">=</span> <span class="fl">5</span>
<span class="va">age_max_tbv</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/which.html">which</a></span><span class="op">(</span><span class="va">init_age</span> <span class="op">&gt;</span> <span class="fl">40</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="fl">1</span> <span class="co"># index of age vector before age is 40 years</span>

<span class="va">out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_model.html">run_model</a></span><span class="op">(</span>model <span class="op">=</span> <span class="st">'odin_model_TBV'</span>,
                 init_EIR <span class="op">=</span> <span class="fl">50</span>,
                 time <span class="op">=</span> <span class="fl">10</span><span class="op">*</span><span class="fl">365</span>,
                 age <span class="op">=</span> <span class="va">init_age</span>,
                 RTS_switch <span class="op">=</span> <span class="fl">0</span>, <span class="co">#Include RTS,S in vaccination campaign? (Y/N)</span>
                 switch_TBV <span class="op">=</span> <span class="fl">1</span>, <span class="co">#Include TBV in vaccination campaign? (Y/N)</span>
                 switch_TRA_to_TBA <span class="op">=</span> <span class="fl">1</span>, <span class="co"># Set to 1 for the model used in the Nat Comms paper</span>
                 irs_cov <span class="op">=</span> <span class="fl">0.8</span>, <span class="co">#Vaccine coverage (within the specified age group)</span>
                 itn_cov <span class="op">=</span> <span class="fl">0</span>,
                 num_int <span class="op">=</span> <span class="fl">4</span>,
                 ITN_IRS_on <span class="op">=</span> <span class="va">ITN_IRS_on</span>,
                 vacc_lag <span class="op">=</span> <span class="fl">0.0</span>, <span class="co">#Delay between ITN introduction &amp; start of vaccination campaign</span>
                 v_interval <span class="op">=</span> <span class="va">v_interval</span>, <span class="co">#frequency of vaccination</span>
                 hill1 <span class="op">=</span> <span class="va">hill1</span>,
                 hill2 <span class="op">=</span> <span class="va">hill2</span>,
                 mu25 <span class="op">=</span> <span class="va">mu25</span>,
                 tau25 <span class="op">=</span> <span class="va">tau25</span>,
                 rho25 <span class="op">=</span> <span class="va">rho25</span>,
                 ds25 <span class="op">=</span> <span class="va">ds25</span>,
                 dl25 <span class="op">=</span> <span class="va">dl25</span>,
                 age_min_tbv <span class="op">=</span> <span class="va">age_min_tbv</span>,
                 age_max_tbv <span class="op">=</span> <span class="va">age_max_tbv</span>,
                 age_min_rts <span class="op">=</span> <span class="va">age_min_rts</span>,
                 age_max_rts <span class="op">=</span> <span class="va">age_max_rts</span>,
                 t_boost_rts <span class="op">=</span> <span class="va">t_boost_rts</span>,
                 CS_peak <span class="op">=</span> <span class="va">CS_peak</span>,
                 CS_boost <span class="op">=</span> <span class="va">CS_boost</span>,
                 p_peak <span class="op">=</span> <span class="va">p_peak</span>,
                 p_boost <span class="op">=</span> <span class="va">p_boost</span>,
                 ds <span class="op">=</span> <span class="va">ds</span>,
                 dl <span class="op">=</span> <span class="va">dl</span>,
                 beta_RTS <span class="op">=</span> <span class="va">beta_RTS</span>,
                 alpha_RTS <span class="op">=</span> <span class="va">alpha_RTS</span>,
                 V_max_RTS <span class="op">=</span> <span class="va">V_max_RTS</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">out</span><span class="op">$</span><span class="va">t</span>,<span class="va">out</span><span class="op">$</span><span class="va">inc05</span>, main<span class="op">=</span> <span class="st">"Incidence in Under 5s"</span>, type<span class="op">=</span><span class="st">'l'</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></code></pre></div>
<p><img src="run_model_alternative_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Joel Hellewell, Hannah Slater, Juliette Unwin, OJ Watson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
